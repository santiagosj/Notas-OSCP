# Pacu Cheat Sheet (2025)

**AWS Post-Exploitation Framework**
Desarrollado por [Rhino Security Labs](https://rhinosecuritylabs.com/aws/introducing-pacu-the-open-source-aws-exploitation-framework/)

---

## ‚ú¶ Instalaci√≥n

```bash
git clone https://github.com/RhinoSecurityLabs/pacu.git
cd pacu
python3 -m venv pacu-env
source pacu-env/bin/activate
pip install -r requirements.txt
python3 pacu.py
```

---

## üöÄ Inicio y Sesiones

```bash
python3 pacu.py               # Inicia Pacu
```

```pacu
new-session <name>           # Crear nueva sesi√≥n
sessions                     # Listar sesiones activas
switch-session <name>       # Cambiar de sesi√≥n
delete-session <name>       # Eliminar sesi√≥n
```

---

## üîê Credenciales

```pacu
set_keys                     # Introducir claves manualmente
import_keys <profile>       # Importar claves de ~/.aws/credentials
```

```pacu
whoami                       # Mostrar usuario/rol activo
```

---

## üó∫Ô∏è Navegaci√≥n y Comandos

```pacu
help                         # Ver ayuda general
help <m√≥dulo>                # Ayuda para un m√≥dulo espec√≠fico
exit                         # Salir de Pacu
clear                        # Limpiar pantalla
```

---

## üîç M√≥dulos: Descubrimiento y Uso

```pacu
list-modules                 # Ver todos los m√≥dulos disponibles
search <t√©rmino>            # Buscar m√≥dulos por palabra clave
run <m√≥dulo> [--flags]       # Ejecutar un m√≥dulo
```

### üîÑ Ejemplo:

```pacu
run iam__enum_users
run ec2__enum --regions us-east-1,us-west-2
```

---

## üß± Categor√≠as de M√≥dulos Comunes

| Categor√≠a      | Ejemplo de m√≥dulos                        |
| -------------- | ----------------------------------------- |
| `iam__`        | `iam__enum_users`, `iam__privesc_scan`    |
| `ec2__`        | `ec2__enum`, `ec2__start_instances`       |
| `s3__`         | `s3__enum`, `s3__download_files`          |
| `lambda__`     | `lambda__enum`, `lambda__privesc`         |
| `sts__`        | `sts__get_caller_identity`                |
| `cloudtrail__` | `cloudtrail__enum`, `cloudtrail__disable` |
| `rds__`        | `rds__enum`, `rds__connect`               |

---

## üßê Informaci√≥n del Entorno

```pacu
data                           # Ver datos recogidos en la sesi√≥n
data <service>                 # Ver datos espec√≠ficos
```

### Ejemplo:

```pacu
data iam
```

---

## üß© Flags √ötiles al Ejecutar M√≥dulos

```bash
--regions <region1,region2>    # Ejecutar en regiones espec√≠ficas
--force                        # Forzar ejecuci√≥n sin confirmaci√≥n
--profile <aws-profile>        # Usar perfil espec√≠fico
--help                         # Ver flags disponibles para el m√≥dulo
```

---

## üß± Modos de Automatizaci√≥n

* Puedes automatizar tareas encadenando m√≥dulos con scripts.
* Los m√≥dulos tambi√©n pueden usarse como plantillas para construir los tuyos propios.

---

## üßë‚Äçüíª Crear mis propios m√≥dulos

1. Copia un m√≥dulo existente de `/modules/iam/` o similar.
2. Modifica `summary`, `description`, `arguments`, y el m√©todo `main`.
3. Aseg√∫rate de registrar datos con `add_*_data`.

Ejemplo en m√≥dulo:

```python
def main(args, pacu_main):
    session = pacu_main.get_active_session()
    client = pacu_main.get_boto3_client('iam')
    response = client.list_users()
    pacu_main.add_user_data(response['Users'])
    return "Enumeraci√≥n completada."
```

---

## üì§ Exportar y Guardar Datos

```pacu
export-data json     # Exportar datos en JSON
export-data csv      # Exportar datos en CSV
```

---

## üîì Escalada de Privilegios (Privilege Escalation)

```pacu
run iam__privesc_scan            # Escaneo de permisos que permiten escalada
run iam__enum_permissions        # Ver permisos efectivos de una identidad
```

---

## üìÖ Credenciales Temporales

```pacu
run sts__assume_role --role-arn <ARN>
```

Esto permite pivotar con un rol accesible.

---

## üßº Limpieza y Persistencia

```pacu
delete-session <name>           # Borrar sesiones
clear-data                      # Borrar todos los datos cargados
```

---

## ‚öíÔ∏è Tips √ötiles

* Usar `whoami` regularmente para confirmar identidad.
* Usar `export-data` para guardar tus hallazgos.
* Combinar `search`, `run`, y `data` para iterar r√°pido.
* Asegurarse de probar `iam__enum_permissions` y `iam__privesc_scan` al inicio.


